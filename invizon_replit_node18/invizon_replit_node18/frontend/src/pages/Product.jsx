import React from 'react'; import axios from 'axios'; import { useParams, useNavigate } from 'react-router-dom'; import { getToken } from '../utils/auth'; export default function Product(){ const { id } = useParams(); const [p,setP]=React.useState(null); const nav = useNavigate(); React.useEffect(()=>{ axios.get('/api/products/'+id).then(r=>setP(r.data)).catch(()=>{}); },[id]); const addToCart=()=>{ const token=getToken(); if(!token) return nav('/login'); axios.post('/api/cart',{product_id:p.id,qty:1},{headers:{Authorization:'Bearer '+token}}).then(()=>alert('Added to cart')).catch(()=>alert('Add failed')); }; if(!p) return <div>Loading...</div>; return (<div className='grid md:grid-cols-2 gap-6'><div><img src={p.images?.[0]||'/assets/images/placeholder.png'} alt='' className='max-w-full' /></div><div><h1 className='text-2xl font-bold'>{p.title}</h1><div className='text-invizon-700 font-bold text-xl mt-4'>â‚¹{p.price}</div><p className='mt-4'>{p.description}</p><div className='mt-6 flex gap-3'><button onClick={addToCart} className='px-4 py-2 rounded bg-gradient-to-r from-invizon-500 to-invizon-600 text-white'>Add to cart</button><a href={p.external_url} target='_blank' rel='noreferrer' className='px-4 py-2 rounded border'>Open on store</a></div></div></div>); }
